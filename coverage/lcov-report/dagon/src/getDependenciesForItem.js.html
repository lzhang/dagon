<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for dagon/src/getDependenciesForItem.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">dagon/src/getDependenciesForItem.js</span></h1>
    <h2>
        Statements: <span class="metric">100% <small>(30 / 30)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">75% <small>(3 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">100% <small>(6 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">100% <small>(30 / 30)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">dagon/src/</a> &#187; getDependenciesForItem.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">316</span>
<span class="cline-any cline-yes">101</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">128</span>
<span class="cline-any cline-yes">127</span>
<span class="cline-any cline-yes">126</span>
<span class="cline-any cline-yes">126</span>
<span class="cline-any cline-yes">126</span>
<span class="cline-any cline-yes">126</span>
<span class="cline-any cline-yes">39</span>
<span class="cline-any cline-yes">39</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">218</span>
<span class="cline-any cline-yes">217</span>
<span class="cline-any cline-yes">216</span>
<span class="cline-any cline-yes">216</span>
<span class="cline-any cline-yes">216</span>
<span class="cline-any cline-yes">216</span>
<span class="cline-any cline-yes">88</span>
<span class="cline-any cline-yes">88</span>
<span class="cline-any cline-yes">88</span>
<span class="cline-any cline-yes">87</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">215</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Created by parallels on 9/10/15.
 */
&nbsp;
'use strict';
&nbsp;
var getDependency = require('./getDependency');
var logger = require('./logger');
var invariant = require('invariant');
var fnArgs = require('fn-args');
&nbsp;
var flatten = function flatten(array) {
    return Array.isArray(array) ? [].concat.apply([], array.map(function (x) {
        return flatten(x);
    }) || <span class="branch-1 cbranch-no" title="branch not covered" >[])</span> : array;
};
&nbsp;
var resolvedItemsGraph = function resolvedItemsGraph(item, resolvedChildren) {
    invariant(item, 'resolvedItemsGraph requires an item to get dependencies for.');
    invariant(resolvedChildren, 'resolvedItemsGraph requires a collection of items to query for dependencies.');
    logger.trace('getDependenciesForItem | resolvedItemsGraph: getting args from wrapper function and finding instances in graph');
    var args = fnArgs(item.wrappedInstance);
    logger.trace('getDependenciesForItem | resolvedItemsGraph: args: ' + args);
    return args.map(function (d) {
        var found = getDependency.resolvedInstance(resolvedChildren, d);
        invariant(found, 'Module ' + item.name + ' has a dependency that can not be resolved: ' + d);
        return found;
    });
};
&nbsp;
var flatDependencyGraph = function flatDependencyGraph(item, dependencyGraph) {
    invariant(item, 'flatDependencyGraph requires an item to get dependencies for.');
    invariant(dependencyGraph, 'flatDependencyGraph requires a collection of items to query for dependencies.');
    logger.trace('getDependenciesForItem | flatDependencyGraph: getting args from wrapper function of ' + item.name + ' and finding instances in graph');
    var args = fnArgs(item.wrappedInstance);
    logger.trace('getDependenciesForItem | flatDependencyGraph: args: ' + args);
    var dependencies = args.map(function (d) {
        console.log('dependncy = ' + d);
        var found = getDependency.fullDependency(dependencyGraph, d);
        invariant(found, 'Module ' + item.name + ' has a dependency that can not be resolved: ' + d);
        return found;
    });
    return flatten(dependencies);
};
&nbsp;
module.exports = {
    flatDependencyGraph: flatDependencyGraph,
    resolvedItemsGraph: resolvedItemsGraph
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3JoYXJpay9EZXZlbG9wbWVudC9NZXRob2RGaXRuZXNzL2RhZ29uL3NyYy9nZXREZXBlbmRlbmNpZXNGb3JJdGVtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQy9DLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNqQyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDckMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVoQyxJQUFJLE9BQU8sR0FBRyxTQUFWLE9BQU8sQ0FBWSxLQUFLLEVBQUU7QUFDMUIsV0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQztlQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FBQSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO0NBQzdGLENBQUM7O0FBRUYsSUFBSSxrQkFBa0IsR0FBRyxTQUFTLGtCQUFrQixDQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRTtBQUN6RSxhQUFTLENBQUMsSUFBSSxFQUFFLDhEQUE4RCxDQUFDLENBQUM7QUFDaEYsYUFBUyxDQUFDLGdCQUFnQixFQUFFLDhFQUE4RSxDQUFDLENBQUM7QUFDNUcsVUFBTSxDQUFDLEtBQUssQ0FBQyxnSEFBZ0gsQ0FBQyxDQUFDO0FBQy9ILFFBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDeEMsVUFBTSxDQUFDLEtBQUssQ0FBQyxxREFBcUQsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUMzRSxXQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBQSxDQUFDLEVBQUk7QUFDakIsWUFBSSxLQUFLLEdBQUcsYUFBYSxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2hFLGlCQUFTLENBQUMsS0FBSyxFQUFFLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLDhDQUE4QyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzdGLGVBQU8sS0FBSyxDQUFDO0tBQ2hCLENBQUMsQ0FBQztDQUVOLENBQUM7O0FBRUYsSUFBSSxtQkFBbUIsR0FBRyxTQUFTLG1CQUFtQixDQUFDLElBQUksRUFBRSxlQUFlLEVBQUU7QUFDMUUsYUFBUyxDQUFDLElBQUksRUFBRSwrREFBK0QsQ0FBQyxDQUFDO0FBQ2pGLGFBQVMsQ0FBQyxlQUFlLEVBQUUsK0VBQStFLENBQUMsQ0FBQztBQUM1RyxVQUFNLENBQUMsS0FBSyxDQUFDLHNGQUFzRixHQUFDLElBQUksQ0FBQyxJQUFJLEdBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUNqSixRQUFJLElBQUksR0FBVyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ2hELFVBQU0sQ0FBQyxLQUFLLENBQUMsc0RBQXNELEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDNUUsUUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUM3QixlQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5QixZQUFJLEtBQUssR0FBRyxhQUFhLENBQUMsY0FBYyxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM3RCxpQkFBUyxDQUFDLEtBQUssRUFBRSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyw4Q0FBOEMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM3RixlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDLENBQUM7QUFDSCxXQUFPLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztDQUNoQyxDQUFDOztBQUdGLE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDYix1QkFBbUIsRUFBQyxtQkFBbUI7QUFDdkMsc0JBQWtCLEVBQUMsa0JBQWtCO0NBQ3hDLENBQUMiLCJmaWxlIjoiL2hvbWUvcmhhcmlrL0RldmVsb3BtZW50L01ldGhvZEZpdG5lc3MvZGFnb24vc3JjL2dldERlcGVuZGVuY2llc0Zvckl0ZW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgcGFyYWxsZWxzIG9uIDkvMTAvMTUuXG4gKi9cblxudmFyIGdldERlcGVuZGVuY3kgPSByZXF1aXJlKCcuL2dldERlcGVuZGVuY3knKTtcbnZhciBsb2dnZXIgPSByZXF1aXJlKCcuL2xvZ2dlcicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xudmFyIGZuQXJncyA9IHJlcXVpcmUoJ2ZuLWFyZ3MnKTtcblxudmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFycmF5KSA/IFtdLmNvbmNhdC5hcHBseShbXSwgYXJyYXkubWFwKHg9PmZsYXR0ZW4oeCkpIHx8IFtdKSA6IGFycmF5O1xufTtcblxudmFyIHJlc29sdmVkSXRlbXNHcmFwaCA9IGZ1bmN0aW9uIHJlc29sdmVkSXRlbXNHcmFwaChpdGVtLCByZXNvbHZlZENoaWxkcmVuKSB7XG4gICAgaW52YXJpYW50KGl0ZW0sICdyZXNvbHZlZEl0ZW1zR3JhcGggcmVxdWlyZXMgYW4gaXRlbSB0byBnZXQgZGVwZW5kZW5jaWVzIGZvci4nKTtcbiAgICBpbnZhcmlhbnQocmVzb2x2ZWRDaGlsZHJlbiwgJ3Jlc29sdmVkSXRlbXNHcmFwaCByZXF1aXJlcyBhIGNvbGxlY3Rpb24gb2YgaXRlbXMgdG8gcXVlcnkgZm9yIGRlcGVuZGVuY2llcy4nKTtcbiAgICBsb2dnZXIudHJhY2UoJ2dldERlcGVuZGVuY2llc0Zvckl0ZW0gfCByZXNvbHZlZEl0ZW1zR3JhcGg6IGdldHRpbmcgYXJncyBmcm9tIHdyYXBwZXIgZnVuY3Rpb24gYW5kIGZpbmRpbmcgaW5zdGFuY2VzIGluIGdyYXBoJyk7XG4gICAgdmFyIGFyZ3MgPSBmbkFyZ3MoaXRlbS53cmFwcGVkSW5zdGFuY2UpO1xuICAgIGxvZ2dlci50cmFjZSgnZ2V0RGVwZW5kZW5jaWVzRm9ySXRlbSB8IHJlc29sdmVkSXRlbXNHcmFwaDogYXJnczogJyArIGFyZ3MpO1xuICAgIHJldHVybiBhcmdzLm1hcChkID0+IHtcbiAgICAgICAgdmFyIGZvdW5kID0gZ2V0RGVwZW5kZW5jeS5yZXNvbHZlZEluc3RhbmNlKHJlc29sdmVkQ2hpbGRyZW4sIGQpO1xuICAgICAgICBpbnZhcmlhbnQoZm91bmQsICdNb2R1bGUgJyArIGl0ZW0ubmFtZSArICcgaGFzIGEgZGVwZW5kZW5jeSB0aGF0IGNhbiBub3QgYmUgcmVzb2x2ZWQ6ICcgKyBkKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0pO1xuXG59O1xuXG52YXIgZmxhdERlcGVuZGVuY3lHcmFwaCA9IGZ1bmN0aW9uIGZsYXREZXBlbmRlbmN5R3JhcGgoaXRlbSwgZGVwZW5kZW5jeUdyYXBoKSB7XG4gICAgaW52YXJpYW50KGl0ZW0sICdmbGF0RGVwZW5kZW5jeUdyYXBoIHJlcXVpcmVzIGFuIGl0ZW0gdG8gZ2V0IGRlcGVuZGVuY2llcyBmb3IuJyk7XG4gICAgaW52YXJpYW50KGRlcGVuZGVuY3lHcmFwaCwgJ2ZsYXREZXBlbmRlbmN5R3JhcGggcmVxdWlyZXMgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zIHRvIHF1ZXJ5IGZvciBkZXBlbmRlbmNpZXMuJyk7XG4gICAgbG9nZ2VyLnRyYWNlKCdnZXREZXBlbmRlbmNpZXNGb3JJdGVtIHwgZmxhdERlcGVuZGVuY3lHcmFwaDogZ2V0dGluZyBhcmdzIGZyb20gd3JhcHBlciBmdW5jdGlvbiBvZiAnK2l0ZW0ubmFtZSsnIGFuZCBmaW5kaW5nIGluc3RhbmNlcyBpbiBncmFwaCcpO1xuICAgIHZhciBhcmdzICAgICAgICAgPSBmbkFyZ3MoaXRlbS53cmFwcGVkSW5zdGFuY2UpO1xuICAgIGxvZ2dlci50cmFjZSgnZ2V0RGVwZW5kZW5jaWVzRm9ySXRlbSB8IGZsYXREZXBlbmRlbmN5R3JhcGg6IGFyZ3M6ICcgKyBhcmdzKTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gYXJncy5tYXAoZCA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdkZXBlbmRuY3kgPSAnK2QpO1xuICAgICAgICB2YXIgZm91bmQgPSBnZXREZXBlbmRlbmN5LmZ1bGxEZXBlbmRlbmN5KGRlcGVuZGVuY3lHcmFwaCwgZCk7XG4gICAgICAgIGludmFyaWFudChmb3VuZCwgJ01vZHVsZSAnICsgaXRlbS5uYW1lICsgJyBoYXMgYSBkZXBlbmRlbmN5IHRoYXQgY2FuIG5vdCBiZSByZXNvbHZlZDogJyArIGQpO1xuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZsYXR0ZW4oZGVwZW5kZW5jaWVzKTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZmxhdERlcGVuZGVuY3lHcmFwaDpmbGF0RGVwZW5kZW5jeUdyYXBoLFxuICAgIHJlc29sdmVkSXRlbXNHcmFwaDpyZXNvbHZlZEl0ZW1zR3JhcGhcbn07XG4iXX0=</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Sep 22 2015 13:36:35 GMT-0500 (CDT)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
